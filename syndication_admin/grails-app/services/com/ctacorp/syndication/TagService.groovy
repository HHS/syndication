package com.ctacorp.syndication

import com.ctacorp.syndication.authentication.UserRole
import com.ctacorp.syndication.commons.util.Util
import com.ctacorp.syndication.media.MediaItem
import grails.converters.JSON
import grails.plugins.rest.client.RestBuilder
import grails.transaction.Transactional

import javax.annotation.PostConstruct

@Transactional(readOnly = true)
class TagService {
    def grailsApplication
    def languageService
    def springSecurityService

    RestBuilder rest = new RestBuilder()

    @PostConstruct
    void init() {
        rest.restTemplate.messageConverters.removeAll { it.class.name == 'org.springframework.http.converter.json.GsonHttpMessageConverter' }
    }

    def listTags(params = [:]) {
        params.languageId = params.languageId ?: 1
        params.typeId = params.typeId ?: 1
        def offset = params.offset ?: 0
        def max = params.max ?: 10
        def sort = params.sort ?: "id"
        params.name = params.name ?: ""
        if (params.order?.toLowerCase() == "desc") {
            sort = "-${sort}"
        }
        get("/tags.json?languageId=${params.languageId}&typeId=${params.typeId}&includePaginationFields=1&offset=${offset}&max=${max}&sort=${sort}&nameContains=${params.name}")
    }

    def listAllTags(params = [:]) {
        def offset = params.offset ?: 0
        def max = params.max ?: 10
        def sort = params.sort ?: "id"
        params.name = params.name ?: ""
        if (params.order?.toLowerCase() == "desc") {
            sort = "-${sort}"
        }
        get("/tags.json?includePaginationFields=1&offset=${offset}&max=${max}&sort=${sort}&nameContains=${params.name}")
    }

    def findTagsByTagName(String name, params = [:]) {
        params.languageId = params.languageId ?: 1
        params.tagTypeId = params.tagTypeId ?: 1
        get("/tags/findTagsByTagName.json?tagName=${name}&languageId=${params.languageId}&tagTypeId=${params.tagTypeId}")
    }

    def listMediaItemsWithoutTags(Long languageId, Long subscriberId, Integer offset = 0, Integer max = 50){
        Language language
        if(!languageId){
            language = Language.findByIsoCode('eng')
        }else{
            language = Language.read(languageId)
        }
        def subscriberMediaIds
        if(subscriberId){
            subscriberMediaIds = MediaItemSubscriber.findAllBySubscriberId(subscriberId)*.mediaItemId
            if(!subscriberMediaIds){
                return []
            }
        }

        def mediaIdsWithTags = get("/tags/allSyndicationIds.json")*.syndicationId.collect{it as long}
        def criteria = MediaItem.createCriteria()
        def mediaWithoutTags = criteria.list(max:max, offset:offset){
            and {
                eq('language', language)
                not {
                    'in'('id', mediaIdsWithTags)
                }
                if(subscriberId){
                    'in'('id', subscriberMediaIds)
                }
            }
            order('id', 'desc')
        }
        mediaWithoutTags
    }

    def suggestTags(MediaItem mediaItem) {
        def titleParts = mediaItem.name.split(" ").collect { cleanString(it) }
        def suggestions = []
        titleParts.each { part ->
            if(part.size() > 1) {
                if (!(part in TAG_EXCLUSION_LIST)) {
                    suggestions << part
                }
            }
        }
        suggestions.unique()
    }

    def getTag(Long id) {
        get("/tags/show/${id}.json")
    }

    def checkTagExistence(String tagName, Long tagTypeId, Long languageId){
        get("/tags/checkTagExistence.json?name=${tagName}&tagTypeId=${tagTypeId}&language=${languageId}")
    }

    def deleteTag(Long id) {
        delete("/tags/deleteTag/${id}")
    }

    def deleteTagType(Long id) {
        delete("/tagTypes/deleteTagType/${id}")
    }

    def tag(String tagIds, Long mediaId) {
        def url = MediaItem.get(mediaId).sourceUrl
        post("/tags/tagSyndicatedItemByTagIds.json", [syndicationId: mediaId, tagIds: tagIds, url: url])
    }

    def setTags(String tagIds, Long mediaId, params = [:]) {
        tagIds = checkForNewTags(tagIds, params)
        
        def url = MediaItem.get(mediaId).sourceUrl
        params.languageId = params.languageId ?: 1
        params.tagTypeId = params.tagTypeId ?: 1
        post("/tags/setTagsForSyndicatedItemByTagIds.json", [syndicationId: mediaId, tagIds: tagIds, url: url, languageId: params.languageId, tagTypeId: params.tagTypeId])
    }

    def checkForNewTags(tagIds, params) {
        tagIds = tagIds?.split(",")?.collect { String id ->
            if (id && !id.isInteger()) {
                createTag(id.substring(1, id.size() - 1), params.tagTypeId as Long, params.languageId as Long).id
            } else {
                id
            }
        }
        tagIds?.removeAll([null])
        return tagIds?.toString()?.replace("[", "")?.replace("]", "")
    }

    def getTagsForSyndicationId(Long id) {
        get("/tags/getTagsForSyndicationId.json?syndicationId=${id}")
    }

    def getTagsForSyndicationId(Long id, Long languageId, Long tagTypeId) {
        get("/tags/getTagsForSyndicationId.json?syndicationId=${id}&languageId=${languageId}&tagTypeId=${tagTypeId}")
    }

    def bulkTag(mediaItems, mediaAndTags, languageId){
        long tagType = 1L //hardcoded to "General" at this time
        def bulkTags = [:]
        int mediaCount, tagCount
        mediaCount = tagCount = 0

        for(MediaItem mediaItem in mediaItems){
            if(UserRole.findByUser(springSecurityService.currentUser).role.authority == "ROLE_PUBLISHER"){
                if(MediaItemSubscriber.findByMediaItem(mediaItem).subscriberId != springSecurityService.currentUser.subscriberId){
                    //if publisher is logged in and they don't own this item then skip to the next mediaItem
                    continue
                }
            }
            mediaCount++
            def tagsForMediaItem = []
            if(List.class.isAssignableFrom(mediaAndTags[mediaItem.id].getClass())){
                mediaAndTags[mediaItem.id].each { String tagName ->
                    tagsForMediaItem << tagName
                    tagCount++
                }
            } else{
                tagCount++
                tagsForMediaItem = mediaAndTags[mediaItem.id]
            }
            bulkTags[mediaItem.id] = [tagNames: tagsForMediaItem, url: mediaItem.sourceUrl]
            log.info "tagging ${mediaItem.id} with ${mediaAndTags[mediaItem.id]}"
        }

        def bulkTagData = [tagType:tagType, language:languageId, bulkTags:bulkTags]
        post("/tags/bulkTag", bulkTagData)
    }

    def createTag(String tagName, Long tagTypeId, Long languageId) {
        post("/tags/findOrSaveTag", [name: tagName, type: tagTypeId, language: languageId])
    }

    def saveTagType(String tagTypeName, String tagTypeDescription) {
        post("/tagTypes/saveTagType", [name: tagTypeName, description: tagTypeDescription])
    }

    def updateTagType(Long tagTypeId, String tagTypeName, String tagTypeDescription) {
        post("/tagTypes/updateTagType", [name: tagTypeName, id: tagTypeId, description: tagTypeDescription])
    }

    def updateTag(Long id, String name, Long languageId, Long tagTypeId) {
        post("/tags/updateTag?languageId=${languageId}&tagTypeId=${tagTypeId}", [name: name, id: id])
    }

    def getTagType(Long id) {
        get("/tagTypes/getTagTypeById/${id}")
    }

    def getTagTypeByName(String name) {
        get("/tags/getTagTypeByName.json?name=${name}")
    }

    def getTagTypes(params = [:]) {
        def include = params.includePaginationFields ?: 0
        def offset = params.offset ?: 0
        def max = params.max ?: 10
        def sort = params.sort ?: "id"
        if (params.order?.toLowerCase() == "desc") {
            sort = "-${sort}"
        }
        get("/tagTypes/index.json?offset=${offset}&max=${max}&sort=${sort}&includePaginationFields=${include}")
    }

    def getTagLanguages(allTags = null) {
        get("/languages.json?allTags=${allTags}")
    }

    def getAllActiveTagLanguages() {
        get("/languages/getActive.json")
    }

    def activateTagLanguage(Long id) {
        post("/languages/activate.json", [languageId: id])
    }

    def deactivateTagLanguage(Long id) {
        post("/languages/deactivate.json", [languageId: id])
    }

    def status() {
        try {
            def status = get("/statusCheck")
            return (status) ? true : false
        } catch (e) {
            log.error(e)
            e.printStackTrace()
            return false;
        }
    }

    //This tags multiple media items with the SAME set of tags, for instance, add the same
    //three tags to 100 different media items
    def tagMultiple(String tagIds, String mediaIds, params = []) {
        def urls = []
        tagIds = checkForNewTags(tagIds, params)
        def mediaIdsAsLongs = mediaIds.split(",").collect { it as Long }.unique()
        mediaIds = mediaIdsAsLongs.join(',')

        mediaIdsAsLongs.each { mediaId ->
            urls << MediaItem.get(mediaId).sourceUrl
        }
        post("/tags/tagSyndicatedItemsByTagIds.json", [syndicationIds: mediaIds, tagIds: tagIds, urls: urls.join(",")])
    }

    /*
        There is a bunch of stuff every media item controller has to do to have the tag widget included.
        This method puts all that logic in one place so it can be reused with maximum dry code.
    */
    def getTagInfoForMediaShowViews(MediaItem mi, params) {

        params.languageId = params.languageId ?: 1
        params.tagTypeId = params.tagTypeId ?: 1

        String tags = getTagsForSyndicationId(mi?.id, params.long('languageId'), params.long('tagTypeId'))?.collect { tag ->
            [id: tag.id, name: tag.name]
        }?.sort { it.name } as JSON

        def languages = getAllActiveTagLanguages()
        def tagTypes = getTagTypes()

        def selectedLanguage = languages.find { "${it.id}" == "${params.languageId}" }?.name
        def selectedTagType = tagTypes.find { "${it.id}" == "${params.tagTypeId}" }?.name

        return [tags: tags, languages: languages, tagTypes: tagTypes, selectedLanguage: selectedLanguage, selectedTagType: selectedTagType]

    }

    private get(String path) {
        try {
            def resp = rest.get(grailsApplication.config.tagCloud.serverAddress + path)
            return resp.json
        } catch (e) {
            log.error "Could not connect to: ${path}"
            return null
        }
    }

    private post(String path, params) {
        try {

            def resp = rest.post((grailsApplication.config.tagCloud.serverAddress ?: "") + path) {
                header 'Date', new Date().toString()
                header 'Authorization', grailsApplication.config.syndication.internalAuthHeader ?: ""
                header 'Content-Type', "application/json;charset=UTF-8"
                accept 'application/json'

                json (params as JSON)
            }
            return resp.json
        } catch (e) {
            log.error "Could not connect to: ${path}"
            return [errors:"Could not connect to: ${path}"]
        }
    }

    private delete(String path) {
        try {
            def resp = rest.delete((grailsApplication.config.tagCloud.serverAddress ?: "") + path) {
                header 'Date', new Date().toString()
                header 'Authorization', grailsApplication.config.syndication.internalAuthHeader ?: ""
                header 'Content-Type', "application/json;charset=UTF-8"
            }
            return resp
        } catch (e) {
            log.error "Could not connect to: ${path}"
            return null
        }
    }

    private String cleanString(input) {
        String cleaned = input
        SYMBOL_EXCLUSION_LIST.each { symbol ->
            if(cleaned.contains(symbol)){
                cleaned = cleaned.replace(symbol, "")
            }
        }
        cleaned = stripNasties(cleaned)
        if(isAcronym(cleaned)){ return cleaned }
        cleaned.toLowerCase()
    }

    private boolean isAcronym(String word){
        boolean longEnough = word.size() >= 2
        if(!longEnough) { return false }
        boolean uppercase = ! word.any{Character.isLowerCase(it as Character)}
        uppercase
    }

    //Not unicode friendly, will have to be address for full unicode support (non-english only?)
    private String stripNasties(String word){
        String cleanedWord = ""
        word.each{
            if(((it as char) as int) <= 127){
                cleanedWord += it
            }
        }
        cleanedWord
    }

    private final static SYMBOL_EXCLUSION_LIST = [
            "'s",
            "’s",
            "’",
            "~",
            "!",
            "@",
            "#",
            "\$",
            "%",
            "^",
            "&",
            "*",
            "(",
            ")",
            "_",
            "+",
            "`",
            "-",
            "=",
            "[",
            "]",
            "\\",
            "{",
            "}",
            "|",
            ";",
            ":",
            "\"",
            ",",
            ".",
            "/",
            "<",
            ">",
            "?",
            " "
    ]
    private final static TAG_EXCLUSION_LIST = ['LP',
                                               'a',
                                               'abandoned',
                                               'able',
                                               'about',
                                               'absolute',
                                               'academic',
                                               'acceptable',
                                               'access',
                                               'acclaimed',
                                               'accomplished',
                                               'accordingly',
                                               'accurate',
                                               'aching',
                                               'acidic',
                                               'acrobatic',
                                               'across',
                                               'action',
                                               'active',
                                               'actual',
                                               'addition',
                                               'additionally',
                                               'address',
                                               'adept',
                                               'admirable',
                                               'admired',
                                               'adolescent',
                                               'adorable',
                                               'adored',
                                               'advanced',
                                               'adventurous',
                                               'affectionate',
                                               'afraid',
                                               'after',
                                               'afterwards',
                                               'aged',
                                               'aggravating',
                                               'aggressive',
                                               'agile',
                                               'agitated',
                                               'agonizing',
                                               'agreeable',
                                               'ajar',
                                               'alarmed',
                                               'alarming',
                                               'alert',
                                               'alienated',
                                               'alive',
                                               'all',
                                               'alone',
                                               'also',
                                               'alternatively',
                                               'altruistic',
                                               'amazing',
                                               'ambitious',
                                               'among',
                                               'ample',
                                               'amused',
                                               'amusing',
                                               'an',
                                               'anchored',
                                               'ancient',
                                               'and',
                                               'angelic',
                                               'angry',
                                               'anguished',
                                               'animated',
                                               'annoyed',
                                               'annoying',
                                               'annual',
                                               'another',
                                               'antique',
                                               'anxious',
                                               'any',
                                               'anyway',
                                               'apprehensive',
                                               'appropriate',
                                               'apt',
                                               'arctic',
                                               'are',
                                               'arid',
                                               'aromatic',
                                               'arrogant',
                                               'artistic',
                                               'as',
                                               'ashamed',
                                               'associated',
                                               'assured',
                                               'astonishing',
                                               'at',
                                               'athletic',
                                               'attached',
                                               'attentive',
                                               'attractive',
                                               'austere',
                                               'authentic',
                                               'authorized',
                                               'automatic',
                                               'avaricious',
                                               'average',
                                               'aware',
                                               'awesome',
                                               'awful',
                                               'awkward',
                                               'babyish',
                                               'back',
                                               'bad',
                                               'baggy',
                                               'bare',
                                               'barren',
                                               'basic',
                                               'be',
                                               'beautiful',
                                               'because',
                                               'before',
                                               'begin',
                                               'belated',
                                               'beloved',
                                               'beneficial',
                                               'besides',
                                               'best',
                                               'better',
                                               'bewildered',
                                               'bewitched',
                                               'big',
                                               'big-hearted',
                                               'biodegradable',
                                               'bite-sized',
                                               'bitter',
                                               'black',
                                               'black-and-white',
                                               'bland',
                                               'blank',
                                               'blaring',
                                               'bleak',
                                               'blind',
                                               'blissful',
                                               'blond',
                                               'bloody',
                                               'blue',
                                               'blue-eyed',
                                               'blushing',
                                               'bogus',
                                               'boiling',
                                               'bold',
                                               'bony',
                                               'bored',
                                               'boring',
                                               'bossy',
                                               'both',
                                               'bouncy',
                                               'bountiful',
                                               'bowed',
                                               'brainy',
                                               'brave',
                                               'breakable',
                                               'brief',
                                               'bright',
                                               'brilliant',
                                               'brisk',
                                               'broken',
                                               'bronze',
                                               'brown',
                                               'bruised',
                                               'bubbly',
                                               'bulky',
                                               'bumpy',
                                               'buoyant',
                                               'burdensome',
                                               'burly',
                                               'bustling',
                                               'busy',
                                               'but',
                                               'buttery',
                                               'buzzing',
                                               'by',
                                               'calculating',
                                               'calm',
                                               'can',
                                               'candid',
                                               'canine',
                                               'capital',
                                               'carefree',
                                               'careful',
                                               'careless',
                                               'caring',
                                               'case',
                                               'caused',
                                               'cautious',
                                               'cavernous',
                                               'celebrated',
                                               'charming',
                                               'cheap',
                                               'check',
                                               'cheerful',
                                               'cheery',
                                               'chief',
                                               'chilly',
                                               'chubby',
                                               'circular',
                                               'circumstances',
                                               'cities',
                                               'classic',
                                               'clean',
                                               'clear',
                                               'clear-cut',
                                               'clever',
                                               'close',
                                               'closed',
                                               'cloudy',
                                               'clueless',
                                               'clumsy',
                                               'cluttered',
                                               'coarse',
                                               'cold',
                                               'colorful',
                                               'colorless',
                                               'colossal',
                                               'combative',
                                               'comes',
                                               'comfortable',
                                               'common',
                                               'compassionate',
                                               'competent',
                                               'complete',
                                               'complex',
                                               'complicated',
                                               'composed',
                                               'concerned',
                                               'conclude',
                                               'concrete',
                                               'condemned',
                                               'confused',
                                               'conscious',
                                               'consequence',
                                               'consequently',
                                               'considerate',
                                               'constant',
                                               'content',
                                               'contrary',
                                               'contrast',
                                               'conventional',
                                               'cooked',
                                               'cool',
                                               'cooperative',
                                               'coordinated',
                                               'corner',
                                               'corny',
                                               'corrupt',
                                               'costly',
                                               'county',
                                               'courageous',
                                               'courteous',
                                               'crafty',
                                               'crazy',
                                               'creamy',
                                               'creating',
                                               'creative',
                                               'creepy',
                                               'criminal',
                                               'crisp',
                                               'critical',
                                               'crooked',
                                               'crowded',
                                               'cruel',
                                               'crushing',
                                               'cuddly',
                                               'cultivated',
                                               'cultured',
                                               'cumbersome',
                                               'curious',
                                               'curly',
                                               'curvy',
                                               'cute',
                                               'cylindrical',
                                               'damaged',
                                               'damp',
                                               'dangerous',
                                               'dapper',
                                               'daring',
                                               'dark',
                                               'darling',
                                               'dazzling',
                                               'dead',
                                               'deadly',
                                               'deafening',
                                               'dear',
                                               'dearest',
                                               'decent',
                                               'decimal',
                                               'decisive',
                                               'deep',
                                               'defeated',
                                               'defenseless',
                                               'defensive',
                                               'defiant',
                                               'deficient',
                                               'definite',
                                               'definitive',
                                               'delayed',
                                               'delectable',
                                               'delicious',
                                               'delightful',
                                               'delirious',
                                               'demanding',
                                               'dense',
                                               'dental',
                                               'dependable',
                                               'dependent',
                                               'depressed',
                                               'descriptive',
                                               'deserted',
                                               'despite',
                                               'detailed',
                                               'determined',
                                               'devoted',
                                               'different',
                                               'differs',
                                               'difficult',
                                               'digital',
                                               'diligent',
                                               'dim',
                                               'dimpled',
                                               'dimwitted',
                                               'direct',
                                               'dirty',
                                               'disastrous',
                                               'discrete',
                                               'disfigured',
                                               'disguised',
                                               'disgusted',
                                               'disgusting',
                                               'dishonest',
                                               'disloyal',
                                               'dismal',
                                               'distant',
                                               'distinct',
                                               'distorted',
                                               'disturbed',
                                               'dizzy',
                                               'do',
                                               'does',
                                               'don\'t',
                                               'dont',
                                               'dopey',
                                               'doting',
                                               'double',
                                               'doubtful',
                                               'down',
                                               'downright',
                                               'drab',
                                               'drafty',
                                               'dramatic',
                                               'dreary',
                                               'droopy',
                                               'dry',
                                               'dual',
                                               'dull',
                                               'dutiful',
                                               'e.g.',
                                               'each',
                                               'eager',
                                               'early',
                                               'earnest',
                                               'easy',
                                               'easy-going',
                                               'ecstatic',
                                               'edible',
                                               'educated',
                                               'effect',
                                               'effects',
                                               'eigth',
                                               'elaborate',
                                               'elastic',
                                               'elated',
                                               'elderly',
                                               'electric',
                                               'elegant',
                                               'elementary',
                                               'elliptical',
                                               'elsewhere',
                                               'embarrassed',
                                               'embellished',
                                               'eminent',
                                               'emotional',
                                               'empty',
                                               'enchanted',
                                               'enchanting',
                                               'encouraging',
                                               'end',
                                               'energetic',
                                               'enlightened',
                                               'enormous',
                                               'enraged',
                                               'enthusiastic',
                                               'entire',
                                               'envious',
                                               'equal',
                                               'equatorial',
                                               'essential',
                                               'esteemed',
                                               'estimated',
                                               'ethical',
                                               'euphoric',
                                               'even',
                                               'event',
                                               'ever',
                                               'evergreen',
                                               'everlasting',
                                               'every',
                                               'evil',
                                               'exalted',
                                               'example',
                                               'excellent',
                                               'excitable',
                                               'excited',
                                               'exciting',
                                               'exemplary',
                                               'exemplified',
                                               'exhausted',
                                               'exotic',
                                               'expensive',
                                               'experienced',
                                               'expert',
                                               'explaining',
                                               'extend',
                                               'extent',
                                               'extra-large',
                                               'extra-small',
                                               'extraneous',
                                               'extroverted',
                                               'exuberant',
                                               'fabulous',
                                               'fact',
                                               'failing',
                                               'faint',
                                               'fair',
                                               'faithful',
                                               'fake',
                                               'false',
                                               'familiar',
                                               'famous',
                                               'fancy',
                                               'fantastic',
                                               'far',
                                               'far-flung',
                                               'far-off',
                                               'faraway',
                                               'fast',
                                               'fat',
                                               'fatal',
                                               'fatherly',
                                               'favorable',
                                               'favorite',
                                               'fearful',
                                               'fearless',
                                               'feisty',
                                               'feline',
                                               'female',
                                               'feminine',
                                               'few',
                                               'fickle',
                                               'fierce',
                                               'fifth',
                                               'filthy',
                                               'finally',
                                               'find',
                                               'fine',
                                               'finished',
                                               'firm',
                                               'first',
                                               'firsthand',
                                               'firstly',
                                               'fitting',
                                               'fixed',
                                               'flaky',
                                               'flamboyant',
                                               'flashy',
                                               'flat',
                                               'flawed',
                                               'flawless',
                                               'flickering',
                                               'flimsy',
                                               'flippant',
                                               'flowery',
                                               'fluffy',
                                               'fluid',
                                               'flustered',
                                               'focused',
                                               'focuses',
                                               'fond',
                                               'foolhardy',
                                               'foolish',
                                               'for',
                                               'forceful',
                                               'forked',
                                               'formal',
                                               'forsaken',
                                               'forthright',
                                               'fortunate',
                                               'fourth',
                                               'fragile',
                                               'fragrant',
                                               'frail',
                                               'frank',
                                               'frantic',
                                               'frayed',
                                               'free',
                                               'french',
                                               'frequent',
                                               'fresh',
                                               'friendly',
                                               'frightened',
                                               'frightening',
                                               'frigid',
                                               'frilly',
                                               'frivolous',
                                               'frizzy',
                                               'from',
                                               'front',
                                               'frosty',
                                               'frozen',
                                               'frugal',
                                               'fruitful',
                                               'full',
                                               'fully',
                                               'fumbling',
                                               'functional',
                                               'funny',
                                               'furthermore',
                                               'fussy',
                                               'fuzzy',
                                               'gargantuan',
                                               'gaseous',
                                               'general',
                                               'generous',
                                               'gentle',
                                               'genuine',
                                               'get',
                                               'giant',
                                               'giddy',
                                               'gifted',
                                               'gigantic',
                                               'giving',
                                               'glamorous',
                                               'glance',
                                               'glaring',
                                               'glass',
                                               'gleaming',
                                               'gleeful',
                                               'glistening',
                                               'glittering',
                                               'gloomy',
                                               'glorious',
                                               'glossy',
                                               'glum',
                                               'golden',
                                               'good',
                                               'good-natured',
                                               'gorgeous',
                                               'got',
                                               'graceful',
                                               'gracious',
                                               'grand',
                                               'grandiose',
                                               'granular',
                                               'grateful',
                                               'grave',
                                               'gray',
                                               'great',
                                               'greater',
                                               'greedy',
                                               'green',
                                               'gregarious',
                                               'grieving',
                                               'grim',
                                               'grimy',
                                               'gripping',
                                               'grizzled',
                                               'gross',
                                               'grotesque',
                                               'grouchy',
                                               'grounded',
                                               'growing',
                                               'growling',
                                               'grown',
                                               'grubby',
                                               'gruesome',
                                               'grumpy',
                                               'guilty',
                                               'gullible',
                                               'gummy',
                                               'had',
                                               'hairy',
                                               'half',
                                               'hand',
                                               'handmade',
                                               'handsome',
                                               'handy',
                                               'happy',
                                               'happy-go-lucky',
                                               'hard',
                                               'hard-to-find',
                                               'harmful',
                                               'harmless',
                                               'harmonious',
                                               'harsh',
                                               'hasty',
                                               'hateful',
                                               'haunting',
                                               'have',
                                               'healthy',
                                               'heartfelt',
                                               'hearty',
                                               'heavenly',
                                               'heavy',
                                               'hefty',
                                               'helpful',
                                               'helpless',
                                               'hence',
                                               'here',
                                               'hidden',
                                               'hideous',
                                               'high',
                                               'high-level',
                                               'hilarious',
                                               'hoarse',
                                               'hollow',
                                               'homeless',
                                               'homely',
                                               'honest',
                                               'honorable',
                                               'honored',
                                               'hopeful',
                                               'horrible',
                                               'hospitable',
                                               'hot',
                                               'how',
                                               'however',
                                               'huge',
                                               'humble',
                                               'humiliating',
                                               'humming',
                                               'humongous',
                                               'hungry',
                                               'hurt',
                                               'hurtful',
                                               'husky',
                                               'i.e.',
                                               'icky',
                                               'icy',
                                               'ideal',
                                               'idealistic',
                                               'identical',
                                               'idiotic',
                                               'idle',
                                               'idolized',
                                               'ignorant',
                                               'ill',
                                               'ill-fated',
                                               'ill-informed',
                                               'illegal',
                                               'illiterate',
                                               'illustrious',
                                               'imaginary',
                                               'imaginative',
                                               'immaculate',
                                               'immaterial',
                                               'immediate',
                                               'immense',
                                               'impartial',
                                               'impassioned',
                                               'impeccable',
                                               'imperfect',
                                               'imperturbable',
                                               'impish',
                                               'impolite',
                                               'important',
                                               'impossible',
                                               'impractical',
                                               'impressionable',
                                               'impressive',
                                               'improbable',
                                               'impure',
                                               'in',
                                               'inborn',
                                               'include',
                                               'including',
                                               'incomparable',
                                               'incompatible',
                                               'incomplete',
                                               'inconsequential',
                                               'increase',
                                               'incredible',
                                               'indeed',
                                               'indelible',
                                               'indolent',
                                               'inexpensive',
                                               'inexperienced',
                                               'infamous',
                                               'infantile',
                                               'infatuated',
                                               'inferior',
                                               'infinite',
                                               'info',
                                               'informal',
                                               'innocent',
                                               'inquisitive',
                                               'insecure',
                                               'insidious',
                                               'insignificant',
                                               'insistent',
                                               'instance',
                                               'instead',
                                               'instructive',
                                               'insubstantial',
                                               'intelligent',
                                               'intent',
                                               'intentional',
                                               'interesting',
                                               'internal',
                                               'international',
                                               'intrepid',
                                               'ironclad',
                                               'irresponsible',
                                               'irritating',
                                               'is',
                                               'issues',
                                               'it',
                                               'itchy',
                                               'jaded',
                                               'jagged',
                                               'jam-packed',
                                               'jaunty',
                                               'jealous',
                                               'jittery',
                                               'joint',
                                               'jolly',
                                               'jovial',
                                               'joyful',
                                               'joyous',
                                               'jubilant',
                                               'judicious',
                                               'juicy',
                                               'jumbo',
                                               'jumpy',
                                               'junior',
                                               'juvenile',
                                               'kaleidoscopic',
                                               'keen',
                                               'keep',
                                               'keeping',
                                               'key',
                                               'kind',
                                               'kindhearted',
                                               'kindly',
                                               'klutzy',
                                               'knobby',
                                               'knotty',
                                               'know',
                                               'knowing',
                                               'knowledgeable',
                                               'known',
                                               'kooky',
                                               'kosher',
                                               'lame',
                                               'lanky',
                                               'large',
                                               'last',
                                               'lasting',
                                               'lastly',
                                               'late',
                                               'later',
                                               'lavish',
                                               'lawful',
                                               'lazy',
                                               'leading',
                                               'leafy',
                                               'lean',
                                               'left',
                                               'legal',
                                               'legitimate',
                                               'let',
                                               'light',
                                               'lighthearted',
                                               'likable',
                                               'likely',
                                               'limited',
                                               'limp',
                                               'limping',
                                               'linear',
                                               'lined',
                                               'liquid',
                                               'little',
                                               'live',
                                               'lively',
                                               'livid',
                                               'loathsome',
                                               'located',
                                               'lone',
                                               'lonely',
                                               'long',
                                               'long-term',
                                               'loose',
                                               'lopsided',
                                               'lost',
                                               'loud',
                                               'lovable',
                                               'lovely',
                                               'loving',
                                               'low',
                                               'loyal',
                                               'lucky',
                                               'lumbering',
                                               'luminous',
                                               'lumpy',
                                               'lustrous',
                                               'luxurious',
                                               'mad',
                                               'made-up',
                                               'magnificent',
                                               'majestic',
                                               'major',
                                               'make',
                                               'male',
                                               'mammoth',
                                               'married',
                                               'marvelous',
                                               'masculine',
                                               'massive',
                                               'mature',
                                               'meager',
                                               'mealy',
                                               'mean',
                                               'meanwhile',
                                               'measly',
                                               'meaty',
                                               'medical',
                                               'mediocre',
                                               'medium',
                                               'meek',
                                               'mellow',
                                               'melodic',
                                               'memorable',
                                               'menacing',
                                               'merry',
                                               'messy',
                                               'metallic',
                                               'mild',
                                               'milky',
                                               'mindless',
                                               'miniature',
                                               'minor',
                                               'minty',
                                               'miserable',
                                               'miserly',
                                               'misguided',
                                               'misty',
                                               'mixed',
                                               'modern',
                                               'modest',
                                               'moist',
                                               'monstrous',
                                               'monthly',
                                               'monumental',
                                               'moral',
                                               'more',
                                               'moreover',
                                               'mortified',
                                               'motherly',
                                               'motionless',
                                               'mountainous',
                                               'muddy',
                                               'muffled',
                                               'multicolored',
                                               'mundane',
                                               'murky',
                                               'mushy',
                                               'musty',
                                               'muted',
                                               'my',
                                               'mysterious',
                                               'naive',
                                               'narrow',
                                               'nasty',
                                               'natural',
                                               'naughty',
                                               'nautical',
                                               'near',
                                               'neat',
                                               'necessary',
                                               'need',
                                               'needy',
                                               'negative',
                                               'neglected',
                                               'negligible',
                                               'neighboring',
                                               'nervous',
                                               'nevertheless',
                                               'new',
                                               'next',
                                               'nice',
                                               'nifty',
                                               'nimble',
                                               'ninth',
                                               'nippy',
                                               'nocturnal',
                                               'noisy',
                                               'nonstop',
                                               'normal',
                                               'not',
                                               'notable',
                                               'noted',
                                               'noteworthy',
                                               'novel',
                                               'now',
                                               'noxious',
                                               'numb',
                                               'nutritious',
                                               'nutty',
                                               'obedient',
                                               'obese',
                                               'oblong',
                                               'obnoxious',
                                               'obvious',
                                               'occasion',
                                               'occasional',
                                               'odd',
                                               'oddball',
                                               'of',
                                               'offbeat',
                                               'offensive',
                                               'official',
                                               'often',
                                               'oily',
                                               'old',
                                               'old-fashioned',
                                               'on',
                                               'once',
                                               'one',
                                               'only',
                                               'open',
                                               'optimal',
                                               'optimistic',
                                               'opulent',
                                               'or',
                                               'orange',
                                               'orderly',
                                               'ordinary',
                                               'organic',
                                               'original',
                                               'ornate',
                                               'ornery',
                                               'other',
                                               'otherwise',
                                               'our',
                                               'out',
                                               'outcome',
                                               'outgoing',
                                               'outlandish',
                                               'outlying',
                                               'outrageous',
                                               'outstanding',
                                               'oval',
                                               'over',
                                               'overcooked',
                                               'overdue',
                                               'overjoyed',
                                               'overlooked',
                                               'palatable',
                                               'pale',
                                               'paltry',
                                               'panicky',
                                               'parallel',
                                               'parched',
                                               'partial',
                                               'passionate',
                                               'past',
                                               'pastel',
                                               'peaceful',
                                               'peppery',
                                               'perfect',
                                               'perfumed',
                                               'periodic',
                                               'perky',
                                               'personal',
                                               'pertinent',
                                               'pesky',
                                               'pessimistic',
                                               'petty',
                                               'phony',
                                               'physical',
                                               'piercing',
                                               'pink',
                                               'pitiful',
                                               'place',
                                               'places',
                                               'plain',
                                               'plaintive',
                                               'plastic',
                                               'playful',
                                               'pleasant',
                                               'pleased',
                                               'pleasing',
                                               'plump',
                                               'plush',
                                               'pointed',
                                               'pointless',
                                               'poised',
                                               'polished',
                                               'polite',
                                               'political',
                                               'poor',
                                               'popular',
                                               'portly',
                                               'posh',
                                               'positive',
                                               'possible',
                                               'potable',
                                               'powerful',
                                               'powerless',
                                               'practical',
                                               'precious',
                                               'present',
                                               'prestigious',
                                               'pretty',
                                               'prevent',
                                               'preventing',
                                               'previous',
                                               'previously',
                                               'pricey',
                                               'prickly',
                                               'primary',
                                               'prime',
                                               'pristine',
                                               'private',
                                               'prize',
                                               'probable',
                                               'productive',
                                               'profitable',
                                               'profuse',
                                               'promote',
                                               'proper',
                                               'proud',
                                               'provided',
                                               'prudent',
                                               'punctual',
                                               'pungent',
                                               'puny',
                                               'pure',
                                               'purple',
                                               'pushy',
                                               'putrid',
                                               'puzzled',
                                               'puzzling',
                                               'quaint',
                                               'qualified',
                                               'quality',
                                               'quarrelsome',
                                               'quarterly',
                                               'queasy',
                                               'querulous',
                                               'questionable',
                                               'quick',
                                               'quick-witted',
                                               'quiet',
                                               'quintessential',
                                               'quirky',
                                               'quixotic',
                                               'quizzical',
                                               'radiant',
                                               'ragged',
                                               'rapid',
                                               'rare',
                                               'rash',
                                               'rather',
                                               'raw',
                                               'reach',
                                               'ready',
                                               'real',
                                               'realistic',
                                               'reasonable',
                                               'recent',
                                               'reckless',
                                               'recommended',
                                               'rectangular',
                                               'red',
                                               'reflecting',
                                               'regal',
                                               'regular',
                                               'regularly',
                                               'related',
                                               'reliable',
                                               'relieved',
                                               'remain',
                                               'remarkable',
                                               'remorseful',
                                               'remote',
                                               'repentant',
                                               'repulsive',
                                               'required',
                                               'respect',
                                               'respectful',
                                               'respects',
                                               'responsible',
                                               'result',
                                               'revolving',
                                               'rewarding',
                                               'rich',
                                               'right',
                                               'rigid',
                                               'ringed',
                                               'ripe',
                                               'roasted',
                                               'robust',
                                               'rosy',
                                               'rotating',
                                               'rotten',
                                               'rough',
                                               'round',
                                               'rowdy',
                                               'royal',
                                               'rubbery',
                                               'ruddy',
                                               'rude',
                                               'rundown',
                                               'runny',
                                               'rural',
                                               'rusty',
                                               'sad',
                                               'safe',
                                               'salty',
                                               'same',
                                               'sandy',
                                               'sane',
                                               'sarcastic',
                                               'sardonic',
                                               'satisfied',
                                               'say',
                                               'scaly',
                                               'scarce',
                                               'scared',
                                               'scary',
                                               'scented',
                                               'scholarly',
                                               'scientific',
                                               'scornful',
                                               'scratchy',
                                               'scrawny',
                                               'second',
                                               'second-hand',
                                               'secondary',
                                               'secondly',
                                               'secret',
                                               'self-assured',
                                               'self-reliant',
                                               'selfish',
                                               'sentimental',
                                               'separate',
                                               'serene',
                                               'serious',
                                               'serpentine',
                                               'seventh',
                                               'several',
                                               'severe',
                                               'shabby',
                                               'shadowy',
                                               'shady',
                                               'shallow',
                                               'shameful',
                                               'shameless',
                                               'sharp',
                                               'shimmering',
                                               'shiny',
                                               'shocked',
                                               'shocking',
                                               'shoddy',
                                               'short',
                                               'short-term',
                                               'should',
                                               'shows',
                                               'showy',
                                               'shrill',
                                               'shy',
                                               'sick',
                                               'side',
                                               'significant',
                                               'silent',
                                               'silky',
                                               'silly',
                                               'silver',
                                               'similar',
                                               'simple',
                                               'simplistic',
                                               'since',
                                               'sinful',
                                               'single',
                                               'six',
                                               'sixth',
                                               'size',
                                               'sizzling',
                                               'skeletal',
                                               'skinny',
                                               'sleepy',
                                               'slight',
                                               'slim',
                                               'slimy',
                                               'slippery',
                                               'slow',
                                               'slushy',
                                               'small',
                                               'smart',
                                               'smiling',
                                               'smoggy',
                                               'smooth',
                                               'smug',
                                               'snappy',
                                               'snarling',
                                               'sneaky',
                                               'sniveling',
                                               'snoopy',
                                               'so',
                                               'sociable',
                                               'soft',
                                               'soggy',
                                               'solid',
                                               'somber',
                                               'some',
                                               'soon',
                                               'sophisticated',
                                               'sore',
                                               'sorrowful',
                                               'soulful',
                                               'soupy',
                                               'sour',
                                               'spanish',
                                               'sparkling',
                                               'sparse',
                                               'specific',
                                               'spectacular',
                                               'speedy',
                                               'spherical',
                                               'spicy',
                                               'spiffy',
                                               'spirited',
                                               'spite',
                                               'spiteful',
                                               'splendid',
                                               'spotless',
                                               'spotted',
                                               'spread',
                                               'spreads',
                                               'spry',
                                               'square',
                                               'squeaky',
                                               'squiggly',
                                               'stable',
                                               'staid',
                                               'stained',
                                               'stale',
                                               'standard',
                                               'starchy',
                                               'stark',
                                               'starry',
                                               'starts',
                                               'states',
                                               'steel',
                                               'steep',
                                               'stemmed',
                                               'sticky',
                                               'stiff',
                                               'still',
                                               'stimulating',
                                               'stingy',
                                               'stop',
                                               'stormy',
                                               'straight',
                                               'straightaway',
                                               'strange',
                                               'strict',
                                               'strident',
                                               'striking',
                                               'striped',
                                               'strong',
                                               'studious',
                                               'stunning',
                                               'stupendous',
                                               'stupid',
                                               'sturdy',
                                               'stylish',
                                               'subdued',
                                               'submissive',
                                               'substantial',
                                               'subtle',
                                               'suburban',
                                               'successful',
                                               'such',
                                               'sudden',
                                               'sugary',
                                               'summation',
                                               'sunny',
                                               'super',
                                               'superb',
                                               'superficial',
                                               'superior',
                                               'supportive',
                                               'sure',
                                               'sure-footed',
                                               'surprised',
                                               'suspicious',
                                               'svelte',
                                               'sweaty',
                                               'sweet',
                                               'sweltering',
                                               'swift',
                                               'sympathetic',
                                               'take',
                                               'taking',
                                               'talented',
                                               'talkative',
                                               'tall',
                                               'tame',
                                               'tan',
                                               'tangible',
                                               'tart',
                                               'tasty',
                                               'tattered',
                                               'taut',
                                               'tedious',
                                               'teeming',
                                               'tempting',
                                               'tender',
                                               'tense',
                                               'tenth',
                                               'tepid',
                                               'terrible',
                                               'terrific',
                                               'testy',
                                               'than',
                                               'thankful',
                                               'that',
                                               'the',
                                               'then',
                                               'therefore',
                                               'these',
                                               'thick',
                                               'thin',
                                               'thing',
                                               'third',
                                               'thirdly',
                                               'thirsty',
                                               'this',
                                               'thorny',
                                               'thorough',
                                               'those',
                                               'though',
                                               'thoughtful',
                                               'thoughtless',
                                               'threadbare',
                                               'thrifty',
                                               'through',
                                               'thunderous',
                                               'tidy',
                                               'tight',
                                               'time',
                                               'timely',
                                               'tinted',
                                               'tiny',
                                               'tired',
                                               'title',
                                               'to',
                                               'too',
                                               'torn',
                                               'total',
                                               'tough',
                                               'toward',
                                               'tragic',
                                               'trained',
                                               'traumatic',
                                               'treasured',
                                               'tremendous',
                                               'triangular',
                                               'tricky',
                                               'trifling',
                                               'trim',
                                               'trivial',
                                               'troubled',
                                               'true',
                                               'trusting',
                                               'trustworthy',
                                               'trusty',
                                               'truthful',
                                               'tubby',
                                               'turbulent',
                                               'twin',
                                               'ugliest',
                                               'ugly',
                                               'ultimate',
                                               'unacceptable',
                                               'unaware',
                                               'uncomfortable',
                                               'uncommon',
                                               'unconscious',
                                               'under',
                                               'understated',
                                               'unequaled',
                                               'uneven',
                                               'unfinished',
                                               'unfit',
                                               'unfolded',
                                               'unfortunate',
                                               'unhappy',
                                               'unhealthy',
                                               'uniform',
                                               'unimportant',
                                               'uninterested',
                                               'unique',
                                               'united',
                                               'unkempt',
                                               'unknown',
                                               'unlawful',
                                               'unless',
                                               'unlined',
                                               'unlucky',
                                               'unnatural',
                                               'unpleasant',
                                               'unrealistic',
                                               'unripe',
                                               'unruly',
                                               'unselfish',
                                               'unsightly',
                                               'unsteady',
                                               'unsung',
                                               'untidy',
                                               'until',
                                               'untimely',
                                               'untried',
                                               'untrue',
                                               'unused',
                                               'unusual',
                                               'unwelcome',
                                               'unwieldy',
                                               'unwilling',
                                               'unwitting',
                                               'unwritten',
                                               'up',
                                               'upbeat',
                                               'upright',
                                               'upset',
                                               'upshot',
                                               'uptight',
                                               'urban',
                                               'usable',
                                               'use',
                                               'used',
                                               'useful',
                                               'useless',
                                               'using',
                                               'usually',
                                               'utilized',
                                               'utter',
                                               'vacant',
                                               'vague',
                                               'vain',
                                               'valid',
                                               'valuable',
                                               'vapid',
                                               'variable',
                                               'vast',
                                               'velvety',
                                               'venerated',
                                               'vengeful',
                                               'verifiable',
                                               'vibrant',
                                               'vicious',
                                               'victorious',
                                               'vigilant',
                                               'vigorous',
                                               'villainous',
                                               'violent',
                                               'violet',
                                               'virtual',
                                               'virtuous',
                                               'visible',
                                               'visiting',
                                               'vital',
                                               'vivacious',
                                               'vivid',
                                               'voluminous',
                                               'wan',
                                               'wandering',
                                               'warlike',
                                               'warm',
                                               'warmhearted',
                                               'warped',
                                               'wary',
                                               'wasteful',
                                               'watchful',
                                               'waterlogged',
                                               'watery',
                                               'wavy',
                                               'weak',
                                               'wealthy',
                                               'weary',
                                               'webbed',
                                               'wee',
                                               'week',
                                               'weekly',
                                               'weepy',
                                               'weighty',
                                               'weird',
                                               'welcome',
                                               'well',
                                               'well-documented',
                                               'well-groomed',
                                               'well-informed',
                                               'well-lit',
                                               'well-made',
                                               'well-off',
                                               'well-to-do',
                                               'well-worn',
                                               'were',
                                               'wet',
                                               'what',
                                               'when',
                                               'whenever',
                                               'whereas',
                                               'which',
                                               'while',
                                               'whimsical',
                                               'whirlwind',
                                               'whispered',
                                               'white',
                                               'who',
                                               'whole',
                                               'whopping',
                                               'why',
                                               'wicked',
                                               'wide',
                                               'wide-eyed',
                                               'wiggly',
                                               'wild',
                                               'willing',
                                               'wilted',
                                               'winding',
                                               'windy',
                                               'winged',
                                               'wiry',
                                               'wise',
                                               'with',
                                               'without',
                                               'witty',
                                               'wobbly',
                                               'woeful',
                                               'wonderful',
                                               'wooden',
                                               'woozy',
                                               'words',
                                               'wordy',
                                               'work',
                                               'worldly',
                                               'worn',
                                               'worried',
                                               'worrisome',
                                               'worse',
                                               'worst',
                                               'worthless',
                                               'worthwhile',
                                               'worthy',
                                               'wrathful',
                                               'wretched',
                                               'writhing',
                                               'wrong',
                                               'wry',
                                               'yawning',
                                               'yearly',
                                               'years',
                                               'yellow',
                                               'yellowish',
                                               'yet',
                                               'you',
                                               'young',
                                               'your',
                                               'youthful',
                                               'yummy',
                                               'zany',
                                               'zealous',
                                               'zesty',
                                               'zigzag']
}